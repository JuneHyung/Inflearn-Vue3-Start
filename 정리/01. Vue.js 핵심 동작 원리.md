# 01. Vue.js í•µì‹¬ ë™ì‘ ì›ë¦¬

## 01-01. Vue3 Reactivity - Proxy ì†Œê°œ

messageê°’ì„ ë³€ê²½í•˜ë©´ í™”ë©´ì´ ë°”ë¡œ ë°”ë€ŒëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë° Vueì˜ ì´ëŸ° ë™ì‘ì´ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠ”ì§€ ì•Œì•„ë³´ì.

```html
// reactivity.html
<div id="app"></div>

<script>
  const data = {
    a: 10
  }
</script>
```

dataì˜ ê°’ì´ ë³€í–ˆì„ ë•Œ ì¶”ê°€ë™ì‘ì„ í•˜ë„ë¡ Javascript APIë¥¼ ì‚¬ìš©í•´ë³´ì

```javascript
<div id="app"></div>

<script>
...
  new Proxy(data, {
    get(){
      console.log('hi')
    }
  })
</script>
```

Proxyì˜ ì²«ë²ˆì§¸ ì¸ìì— dataë¥¼ ë‘ë²ˆì§¸ ì¸ìì— ë™ì‘ì„ ì •ì˜ í•  ê²ƒì´ë‹¤.ì—¬ê¸°ì„œ **getê³¼ set**ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤.

ìœ„ì˜ ê²½ìš° dataê°ì²´ì˜ ë™ì‘ì— proxyë¥¼ ê±¸ê² ë‹¤ê³  í•˜ëŠ” ê²ƒì¸ë° proxyë¥¼ ê±¸ê² ë‹¤ëŠ” ê²ƒì€ **ë°ì´í„°ì˜ ë™ì‘ì„ ëª¨ë°©í•˜ëŠ” ë¬´ì–¸ê°€ë¥¼ ë§Œë“¤ê² ë‹¤**ëŠ” ì˜ë¯¸.

```javascript
const app = new Proxy(data, {
    get(){
        console.log('hi')
    }
})
```

dataë¼ëŠ” ê°ì²´ í”„ë¡ì‹œë¥¼ ê±´ ê²°ê³¼ê°€ appì´ê¸° ë•Œë¬¸ì— appì—ì„œ ë‚´ìš©ë“¤ì€ ì²˜ìŒì—” ë°ì´í„°ì™€ ê°™ì§€ë§Œ, appë‚´ìš©ì´ ë°”ë€Œê²Œ ë˜ë©´, dataì˜ ë‚´ìš©ë„ ë°”ë€Œê²Œ ëœë‹¤.



`new Proxy`ë¼ëŠ” ê²ƒì´ ê²°êµ­ì— dataë¼ëŠ” ê°ì²´ë¥¼ ëª¨ë°©í•œ ë‹¤ìŒì— ë™ì‘ì„ ì¶”ê°€í–ˆë‹¤ëŠ” ê²ƒì´ê³ , aë¼ëŠ” ì†ì„±ì„ ì ‘ê·¼í•˜ë©´ getì´ ë™ì‘í•˜ê²Œ ë˜ê³  aë¼ëŠ” ì†ì„±ì„ ìƒˆë¡œ ì“°ê±°ë‚˜ ë³€ê²½í•˜ë©´ setì´ ë™ì‘.

```javascript
<div id="app"></div>

<script>
  const data = {
    a: 10
  }

  const app = new Proxy(data, {
    get(){
      console.log('ê°’ ì ‘ê·¼')
    },
    set(){
      console.log('ê°’ ê°±ì‹ ');
    }
  })
</script>
```

![Proxy_result](./images/01_Proxy_result.jpg)

**â— ì •ë¦¬í•˜ìë©´, ProxyëŠ” ê°ì²´ë¥¼ ëª¨ë°©í•˜ì—¬ ê°’ì—ëŒ€í•œ ë³€ê²½ê³¼ ì ‘ê·¼ì‹£ ë™ì‘ì„ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.**





## 01-02. Vue3 Reactivity - ë™ì‘ ì›ë¦¬ êµ¬í˜„

ê³µì‹ ë¬¸ì„œì˜ Proxy APIë¥¼ ë³´ë©´, ê¸°ë³¸ ì •ì˜ì— `Redefine fundamental operations for that object`ë¼ê³  ê°ì²´ì˜ ê¸°ë³¸ ë™ì‘ì„ ì¬ì •ì˜ í•  ìˆ˜ìˆë‹¤ëŠ” í‘œí˜„ì´ ìˆë‹¤.

í”„ë¡ì‹œë¥¼ ì´ìš©í•´ Vueì˜ ë™ì‘ì„ ëª¨ë°©í•´ë³´ì.

setí•  ë•Œ DOM APIë¥¼ ì´ìš©í•˜ì—¬ APPì— ì ‘ê·¼í•´ innerHTMLë¡œ ê°’ì„ ë„£ì–´ì¤„ ê²ƒì´ë‹¤.<br/>(getê³¼ setì˜ íŒŒë¼ë¯¸í„°ê°’ì€ ê³µì‹ë¬¸ì„œì—ì„œ í™•ì¸ ê°€ëŠ¥.)

```html
<div id="app">
  <!-- rendering ë  ë©”ì„¸ì§€ -->
</div>

<script>
  const data = {
    message: 'hi'
  }

  function render(sth) {
    const div = document.querySelector('#app');
    div.innerHTML = sth;
  }

  const app = new Proxy(data, {
    get(target, property, receiver){
      console.log('ê°’ ì ‘ê·¼')
    },
    set(target, property, value, receiver){
      console.log('ê°’ ê°±ì‹ ');
      target[property] = value; // ì†ì„± ê°’ ë³€ê²½
      render(value); // appì— messageë„£ì–´ ë Œë”ë§
    }
  })
</script>
```



messageë¥¼ ë³€ê²½í•˜ë©´ í™”ë©´ì˜ ê°’ë„ ë³€ê²½ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì´ê²ƒì´ Vueì—ì„œ ì¶”êµ¬í•˜ëŠ” ë¦¬ì•¡í‹°ë¹„í‹°ì´ë‹¤.

![Proxy_Render_Message](./images/01_Proxy_Render_Message.jpg)



> Proxyì˜ Getê³¼ Set íŒŒë¼ë¯¸í„°
>
> ```javascript
> new Proxy(target, {
>     get(target, property, receiver){ ... }
>     set(target, property, value, receiver){ ... }
> })
> ```
>
> **Get**
>
> * target : ëŒ€ìƒ ê°ì²´
> * property : ê°€ì ¸ì˜¬ ì†ì„±ì˜ ì´ë¦„ ë˜ëŠ” Symbol
> * receiver : í”„ë¡ì‹œ í˜¹ì€ í”„ë¡ì‹œì—ì„œ ìƒì†ë˜ëŠ” ê°ì²´.
>
> **Set**
>
> * target : ëŒ€ìƒ ê°ì²´
> * property : ê°€ì ¸ì˜¬ ì†ì„±ì˜ ì´ë¦„ ë˜ëŠ” Symbol
> * value : ì„¤ì •í•  ì†ì„±ì˜ ìƒˆ ê°’
> * receiver : í• ë‹¹ì´ ì§€ì‹œëœ ì›ë˜ ê°ì²´. ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡ì‹œ ìì²´.



**â— Vue3ì—ì„œëŠ” í”„ë¡ì‹œë¼ëŠ” APIë¥¼ ì´ìš©í•´ í™”ë©´ì„ ë³€ê²½í•˜ê³  ìˆë‹¤ëŠ” ê±¸ ì•Œë©´ ëœë‹¤.**

### ğŸ“˜ ì°¸ê³ 

* [MDN Proxy](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Proxy)
* [MDN DOM](https://developer.mozilla.org/ko/docs/Web/API/Document_Object_Model/Introduction)



## 01-03. Reactivity ì°¨ì´ì  - Vue2 & Vue3

Reactivityê°€ ë­”ì§€ ì•Œê¸° ìœ„í•´ì„œëŠ” Reactivity in Depthë¥¼ ì°¸ê³ .

![Proxy_getter_setter](./images/01_Proxy_getter_setter.jpg)

ì‚¬ì§„ì˜ dataë¶€ë¶„ì´ ìœ„ì—ì„œ í”„ë¡ì‹œë¥¼ ì—°ê²°í–ˆë˜ ë¶€ë¶„ìœ¼ë¡œ ë³´ë©´ëœë‹¤.

```html
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<div id="app">{{ message }}</div>

<script>
  const { createApp, ref } = Vue

  createApp({
    setup() {
      const message = ref('Hello vue!')
      return {
        message
      }
    }
  }).mount('#app')
</script>
```

Vue.createAppì˜ dataì•ˆì— ê°’ì˜ ë³€ê²½ê³¼ ì ‘ê·¼ì´ ìˆì„ ë•Œë§ˆë‹¤ ë‚´ë¶€ì ìœ¼ë¡œ UIë¥¼ ê°±ì‹ í•´ì¤€ë‹¤ë˜ì§€, ë³„ë„ì˜ computed APIë¥¼ íƒœìš´ë‹¤ë˜ì§€ ê·¸ëŸ°ì‹ì˜ ì—°ì‚°ì„ ì‹œì¼œì¤€ë‹¤. ì´ ë‚´ë¶€ì ì¸ ë™ì‘ì€ vueì— ìœ„ì„í•˜ê³ , ìš°ë¦¬ëŠ” ë°ì´í„°ë¡œ ì„ ì–¸í•˜ê³  ê·¸ê±¸ ê°€ì§€ê³  í™”ë©´ì„ ê°œë°œí•˜ëŠ” ê²ƒ.

â— dataê°€ setupë˜ê³  -> watcherë¥¼ í†µí•´ì„œ compoentê°€ ë Œë”ë˜ì–´ (componentì˜ render functionì„ ì´ìš©) -> Virtual DOM Treeë¡œ í™”ë©´ì— UIê°€ ê·¸ë ¤ì§„ë‹¤.

> â— **ê¸°ì¡´ Vue2ì—ì„œ ë¦¬ì•¡í‹°ë¹„í‹°ì˜ í•œê³„ì  (Change Detection Caveats)**
>
> Vue2ì— ê¸°ë°˜ì´ ë˜ëŠ” Object.definePropertyì—ì„œ ë¬¸ì œê°€ ìˆì—ˆë‹¤.
>
> ```javascript
> const data = {a: ''}
> 
> Object.defineProperty(data, 'a', {
>     get(){...},
> 	set(){...}
> })
> ```
>
> definePropertyê°€ íŠ¹ì • ì†ì„±ì— ëŒ€í•œ ë™ì‘ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— **ì†ì„±ë§ˆë‹¤ ëª¨ë“  Define Proeprtyì˜ APIë¥¼ ëŒë ¤ì•¼ í—€ë‹¤.**
>
> ì¦‰, ë¯¸ë¦¬ ì •ì˜ë˜ì§€ ì•Šì€ ì†ì„±ì— ëŒ€í•´ì„œëŠ” ë¦¬ì•¡í‹°ë¹„í‹°ê°€ ì¤‘ë¹„ë˜ì§€ ì•ŠëŠ” í•œê³„ê°€ ìƒê²¼ë‹¤.
>
> Vue3ì—ì„œëŠ” ProxyëŠ” ê°ì²´ë¥¼ í†µìœ¼ë¡œ ëª¨ë°©í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì–´ë–¤ ì†ì„±ì´ ë“¤ì–´ì˜¤ë˜ì§€ ë™ì¼í•œ í”„ë¡ì‹œì˜ ë™ì‘ìœ¼ë¡œ ì—®ì„ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.



### ğŸ“˜ ì°¸ê³ 

* [Vue2 - Reactivity In Depth](https://v2.vuejs.org/v2/guide/reactivity.html)
* [Vue3 - Reactivity ì‹¬í™”](https://vuejs.org/guide/extras/reactivity-in-depth.html#what-is-reactivity)

