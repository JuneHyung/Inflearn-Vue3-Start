# 00.Vue Composition API ê¸°ì´ˆ

## 00-01. Vue Composition API ì†Œê°œ

ê³µì‹ë¬¸ì„œì— composition apiì— ëŒ€í•œ ê²ƒë“¤ì´ ì •ë¦¬ ë˜ì–´ìˆë‹¤. <br/>(ë™ì‘ì›ë¦¬ë‚˜ ë°°ê²½ì´ ê¶ê¸ˆí•˜ë‹¤ë©´ ê³µì‹ë¬¸ì„œ ì°¸ê³ .)



### Composition API

**ì»´í¬ë„ŒíŠ¸ ì½”ë“œ ì¬ì‚¬ìš©ì„±ì„ ë†’ì—¬ì£¼ëŠ” API**ì´ë‹¤.<br/> Vue2, Vue3 ëª¨ë‘ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë©°, Vue2ì—ì„œ í”ŒëŸ¬ê·¸ì¸ í˜•íƒœë¡œ ì§€ì›ë˜ë‹¤ê°€ Vue3ë¶€í„° ê³µì‹ APIë¡œ ì±„íƒë¨.



### ğŸ“˜ ì°¸ê³ 

* [ê³µì‹ë¬¸ì„œ Composition API](https://vuejs.org/guide/extras/composition-api-faq.html#what-is-composition-api)



## 00-02. Vue Composition API ë°°ê²½ê³¼ ì˜¤í•´

ì»´í¬ì§€ì…˜ APIê°€ ì–´ë–»ê²Œ ì»¤ë®¤ë‹ˆí‹° ë ˆë²¨ì—ì„œ ë…¼ì˜ê°€ ë˜ì—ˆê³ , ê³µì‹ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë˜ì—ˆëŠ”ì§€ ì‚´í´ë³´ì.

Vue ì €ì¥ì†Œì˜ rfcsë¥¼ ë³´ì.

>  **RFC**
>
> `Request For Comment`ì˜ ì¤„ì„ë§ë¡œ apië¥¼ ì¶”ê°€í•œë‹¤ê±°ë‚˜ ì–´ë–¤ ì†ì„±ì„ ë°”ê¾¼ë‹¤ê±°ë‚˜ ë“±ë“± ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë³€ê²½ì´ ìˆì„ ë•Œ ë§ˆë‹¤ ê·¸ **ë³€ê²½ì ì— ëŒ€í•´ PRì„ ì˜¬ë¦¬ê³ , í˜¹ì€ ì´ìŠˆë¥¼ ë§Œë“¤ê±°ë‚˜ í•´ì„œ ì»¤ë®¤ë‹ˆí‹° ì‚¬ìš©ìë“¤ê³¼ ì˜ê²¬ì„ ì£¼ê³ ë°›ìœ¼ë©° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë°©í–¥ì„±ì„ ë…¼ì˜ í•˜ëŠ” ì¥ì†Œ** ì´ë‹¤.
>
> ì»´í¬ì§€ì…˜ apiì˜ ì‹œì‘ì€ Reactì˜ hookì—ì„œ ì˜ê°ì„ ë°›ì•˜ë‹¤.

RFCì˜ ë‚´ìš©ì— ëŒ€í•´ ì‚´í´ë³´ì.

```text
High-level Q&A
Is this like Python 3 / Angular 2 / Do I have to rewrite all my code?
No. The new API is 100% compatible with current syntax and purely additive. All new additions are contained within the new setup() function. Nothing is being removed or deprecated (in this RFC), nor do we have plan to remove / deprecate anything in the foreseeable future. (A previous draft of this RFC indicated that there is the possibility of deprecating a number of 2.x options in a future major release, which has been redacted based on user feedback.)
...
```

ì²˜ìŒì— ì‚¬ëŒë“¤ì´ ê¸°ì¡´ option apií˜•íƒœê°€ ì•„ë‹Œ í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±í•˜ëŠ”ê²ƒì— ì˜ì•„í•¨ì„ ëŠê¼ˆë‹¤. => setup()ë“±ìœ¼ë¡œ ì‘ì„±í•˜ëŠ”ê²Œ í”„ë ˆì„ì›Œí¬ê°€ ë§ì´ ë°”ë€ŒëŠ”ê²Œ ì•„ë‹Œê°€ í•˜ëŠ” ë“±ì˜ ì˜ê²¬ì´ ë§ì•˜ë‹¤. Angularì˜ ê²½ìš°ì—ë„ íŒŒê²©ì ì¸ ë³€í™”ê°€ ìˆì—ˆì–´ì„œ, Vue2->Vue3ë„ ê·¸ëŸ°ê²Œ ì•„ë‹Œê°€. 

ì´ëŸ° **ì˜ê²¬ë“¤ì„ ë…¼ì œë¡œ ì¡ê³  ê·¸ì— ëŒ€í•œ ë‹µë³€ì„ ì •ë¦¬ í•´ë†“ì•˜ë‹¤**ê³  ë³´ë©´ ëœë‹¤.

ìœ„ì˜ ë‚´ìš©ì„ ì ê¹ ë³´ìë©´, new APIëŠ” í˜„ì¬ ì–´ë–¤ ë¬¸ë²•ê³¼ ì™„ì „íˆ ê²°í•©ì´ ë  ìˆ˜ ìˆê³ , ì¶”ê°€ì ì¸ê±°ë‹¤. ì•„ë¬´ê²ƒë„ Vue2ì—ì„œ ì§€ìš°ê±°ë‚˜ ì‚¬ë¼ì§ˆ ê¸°ëŠ¥ì´ ì—†ì„ ê²ƒì´ë‹¤. ë¼ëŠ” ë‚´ìš©ì´ë‹¤. ì¦‰, **ë¬´ì¡°ê±´ ì“¸ í•„ìš”ì—†ì´ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒ**ì´ë‹¤. ë¼ê³ í•œë‹¤.

â— ì‹œê°„ë‚  ë•Œ ì½ì–´ë³´ê¸¸ ì¶”ì²œ!



í•œê°€ì§€ë§Œ ë”ë³´ì.

```text
This looks like React, why don't I just use React?
First, the template syntax doesn't change, and you are not forced to use this API for your <script> sections at all.

Second, if you use React, you'll most likely be using React Hooks. This API is certainly inspired by React hooks, but it works fundamentally differently and is rooted in Vue's very own reactivity system. In addition, we believe this API addresses a number of important usability issues in React Hooks. If you cannot put up with this API, you will most likely dislike React Hooks even more.

...
```

Reactì—ì„œ ì˜ê°ì„ ë°›ì•˜ê¸° ë•Œë¬¸ì— Reactì²˜ëŸ¼ ë³´ì¸ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— Reactë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ê²ƒì´ëƒëŠ” ì§ˆë¬¸.

Vue.js(ë°˜ì‘ì„±)ëŠ” ë¦¬ì•¡í‹°ë¹„í‹°, ë°˜ì‘ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ê°€ ë³€í–ˆì„ ë–„ í™”ë©´ì„ ë³€í™˜ì‹œí‚¤ê³ , <br/>React(ë¶ˆë³€ì„±)ëŠ” stateê°€ ë³€í–ˆì„ ë–„ ê·¸ ì»´í¬ë„ŒíŠ¸ ì½”ë“œë¥¼ ë‹¤ì‹œ ì¬ì‹¤í–‰ì‹œí‚¤ë©´ì„œ í™”ë©´ì„ ë Œë”ë§ ì‹œí‚¨ë‹¤.

ì´ëŸ° ë™ì‘ êµ¬ì¡°ì˜ ì°¨ì´ê°€ ìˆë‹¤.



### ğŸ“˜ ì°¸ê³ 

* [Vue.js RFCS](https://github.com/vuejs/rfcs/pull/42)



## 00-03. Vue CompositionAPI ê¸°ë³¸

ì»´í¬ì§€ì…˜ APIë¼ëŠ” ê²ƒì€ ì»´í¬ë„ŒíŠ¸ ì½”ë“œ ì¬ì‚¬ìš©ì„±ì„ ë†’ì—¬ì£¼ê¸° ìœ„í•œ APIì´ë‹¤.

ê°„ë‹¨í•œ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```vue
<template>
  <div>
    <p>{{ message }}</p>
    <button @click="changeMessage">change</button>
  </div>
</template>

<script>
export default {
  data() {
    return {
      message: 'Hi'
    }
  },
  methods: {
    changeMessage() {
      this.message = 'Hello'
    }
  }
}
</script>
```

ì˜µì…˜ ì†ì„± í˜•íƒœë¡œ dataì™€ methodë¥¼ ì •ì˜í•˜ê³  ìˆë‹¤.

ìœ„ ì½”ë“œë¥¼ ì»´í¬ì§€ì…˜ apií˜•íƒœë¡œ ì‘ì„±í•œ ì½”ë“œë‹¤.

```vue
<template>
  <div>
    <p>{{ message }}</p>
    <button @click="changeMessage">change</button>
  </div>
</template>

<script>
import { ref } from 'vue';

export default {
  setup() {
    const message = ref('Hello');
    const changeMessage = () => {
      message.value = 'Hi';
    }

    return { message, changeMessage }
  }
}
</script>
```

dataì™€ methodê°€ ì‚¬ë¼ì§€ê³  setupí•˜ë‚˜ë§Œ ë‚¨ì•„ìˆë‹¤.

`ref`ëŠ” vue3ì—ì„œ ì œê³µí•˜ëŠ” apië¡œ, ì´ë¥¼ ì´ìš©í•´ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤. <br/>=> option apiì—ì„œ dataì— ì„ ì–¸í•œ messageì™€ ë™ì¼í•œ ì—­í• . ë‹¨ìˆœíˆ ë³€ìˆ˜ ì„ ì–¸ì´ ì•„ë‹ˆë¼ **reactivityë¥¼ ì£¼ì…í•˜ëŠ” dataë¥¼ í•˜ë‚˜ ì„ ì–¸í•˜ê² ë‹¤ê³  í•˜ëŠ” ê²ƒ**ì´ **ref**ì´ë‹¤.

ê¸°ì¡´ì— `this.message`ë¡œ ì ‘ê·¼í•˜ë˜ ë¶€ë¶„ì´ `message.value`ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.

â— ì •ë¦¬í•˜ìë©´, `setup()` ì´ë¼ëŠ” ì˜µì…˜ì†ì„±í•˜ë‚˜ ì•ˆì—ë‹¤ê°€ ë°ì´í„°ë„ ì„ ì–¸í•˜ê³ , í•¨ìˆ˜, lifecycle, propsë“±ë“± ë‹¤ ì„ ì–¸í•  ìˆ˜ìˆë‹¤.



### ğŸ“˜ ì°¸ê³ 

* [Cracking Vue - Composition API](https://joshua1988.github.io/vue-camp/composition/computed.html)



## 00-04. Composition API ê¸°ë³¸ ì½”ë“œ ì‘ì„±

Vue CLIë¥¼ ì‚¬ìš©í•´ vue3ë¥¼ ê¸°ë³¸ì˜µì…˜ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼  ìƒì„±.

```shell
vue create <project-name>
```

ì¼ë‹¨, option api í˜•íƒœë¡œ ì‘ì„±.

```vue
<template>
  <div>
    <p>{{ message }}</p>
    <button @click="changeMessage" />
  </div>
</template>

<script>
export default {
  data(){
    return{
      message: 'Hello'
    }
  },
  methods:{
    changeMessage(){
      this.message = 'hi'
    }
  }
}
</script>
```



ì´ì½”ë“œë¥¼ setupìœ¼ë¡œ ë³€ê²½. (scriptë¶€ë¶„ì„ ì£¼ì„ì²˜ë¦¬í•˜ê³ , í•˜ë‚˜ì”© ì‘ì„±í•´ë³´ê¸°.)

```vue
<script>
import { ref } from 'vue';

export default {
  setup(){
    // data
    const message = ref("Hello");

    // methods
    function changeMessage(){
      message.value = 'Hi';
    }
    return {message, changeMessage}
  }
}
</script>
```

* refë¡œ ì„ ì–¸í•œ ê°’ë“¤ì€ .valueë¡œ ì‹¤ì œ ê°’ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
* ë§ˆì§€ë§‰ì— returnì„ í•´ì£¼ì–´ì•¼ setupì•ˆì—ì„œ ì‚¬ìš©í•œ ê²ƒì„ setup ë°–ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.



## 00-05. Vue Composition API ì¥ì 

### 01. íƒ€ì… ì¶”ë¡ ì´ ì¢€ ë” ìš©ì´í•´ì¡Œë‹¤.

íƒ€ì…ì´ ì¢€ ë” ì •í™•í•˜ê²Œ ì •ì˜ëœë‹¤.

Vue2ì—ì„œ Vue3ë¡œ ë„˜ì–´ê°ˆ ë–„ Vue3ì˜ ì „ì²´ ë¡œì§ì„ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ë‹¤ì‹œ ì‘ì„±í–ˆë‹¤.<br/>(Vue2ë‹¹ì‹œì—” Typescriptê°€ ì£¼ë¥˜ê°€ ì•„ë‹ˆì˜€ê³ , ìƒíƒœê³„ê°€ í¬ì§€ì•Šì•˜ì–´ì„œ ì´ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ ì‚¼ì§€ ì•Šì•˜ë‹¤.)



### 02. ë¡œì§ë“¤ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

srcì— `hooks(composable)`í´ë”ë¥¼ ë§Œë“¤ì–´ useMessageë¼ëŠ” íŒŒì¼ì„ ìƒì„± í›„ scriptì—ì„œ ì‘ì„±í•œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ì˜®ê¸°ì.

```javascript
import { ref } from "vue";

function useMessage() {
  const message = ref('hello');
  function changeMessage(){
    message.value = 'hi';
  }
  return {message, changeMessage}
}

export {useMessage}
```

App.vueì—ì„œ useMessageë¥¼ ë¶ˆëŸ¬ì˜¤ë©´, component ì½”ë“œê°€ íšê¸°ì ìœ¼ë¡œ ì‘ì•„ì§„ë‹¤.

```javascript
<script>
import {useMessage} from './composable/useMessage'
export default {
  setup(){
    const {message,changeMessage} = useMessage();
    return {message, changeMessage}
  }
}
</script>
```

ì´ëŸ° ì‹ìœ¼ë¡œ ì½”ë“œì˜ ì¬ì‚¬ìš©ì„±ì„ ê·¹ëŒ€í™” ì‹œí‚¨ë‹¤.



## 00-06. Vue Composition API ë‹¨ì 

ì•ì˜ ì¥ì ë“¤ì´ ë‹¨ì ì´ ë  ìˆ˜ ìˆë‹¤.

App ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë³´ì.

```vue
<template>
  <div>
    <p>{{ message }}</p>
    <button @click="changeMessage" />
  </div>
</template>

<script>
import {useMessage} from './composable/useMessage'
export default {
  setup(){
    const {message,changeMessage} = useMessage();
    return {message, changeMessage}
  }
}
</script>

<style lang="scss" scoped>

</style>
```

ì§ì ‘ì ì¸ ê´€ë ¨ì´ ìˆëŠ” ë¡œì§ë“¤ì´ íŠ¹ì • íŒŒì¼ë¡œ ì´ë™í•´ ë³´ê²Œë˜ëŠ” ë¶ˆí•„ìš”í•œ ì „í™˜ ë¹„ìš©ì´ ìƒê¸´ë‹¤.

**â— ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ê²Œ ë§Œë“  ë‹¤ìŒì— ì¡°í•©í•˜ëŠ” í˜•íƒœë¡œ ì„¤ê³„ë¥¼ í•˜ì.**

ì‘ê²Œ ë§Œë“œëŠ” ì„¤ê³„ë§Œ ì˜í•´ë„, composition apië‚˜ mixin, ì¬í™œìš©í•˜ëŠ” ì½”ë“œë“¤ì„ í¬ê²Œ ì‚¬ìš©í•  ì´ìœ ê°€ ì—†ê²Œëœë‹¤.

ë™ì¼í•œ ì½”ë“œë¥¼ ë°˜ë³µí•´ì„œ ë„£ëŠ” ê²½ìš°ì—” í•˜ë‚˜ì˜ íŒŒì¼ì—ì„œ ë‚˜ë¨¸ì§€ ì»´í¬ë„ŒíŠ¸ì— ë¿Œë ¤ì£¼ë„ë¡ ëª¨ë“ˆí™”í•  ê²ƒ.



ê·¸ ë‹¤ìŒ, setupì„ ì‚¬ìš©í–ˆì„ë•Œ **ì¶”ê°€ì ì¸ í•™ìŠµë¹„ìš©**ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ì˜ˆë¥¼ë“¤ì–´ `computed()`, `watch()`, `watchEffect()`ë“± ë§ì€ APIì™€ ì†ì„±ë“¤ì´ ìƒê²¨ ì´ê±°ì— ëŒ€í•œ í•™ìŠµë¹„ìš©ì´ ìƒê¸´ë‹¤.



ë§ˆì§€ë§‰ìœ¼ë¡œ, ì£¼ì˜í•  ì ì€ setupì•ˆì— ë§ì€ ì½”ë“œê°€ ë“¤ì–´ê°€ê²Œ ë˜ë©´, ì½”ë“œ ì–‘ì´ ë§ì•„ì§€ë©´ì„œ ë‚œì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.

ì–´ë–¤ ì½”ë“œê°€ methodê³ , dataì¸ì§€ êµ¬ë¶„í•˜ê¸° ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì£¼ì˜í•´ì•¼í•œë‹¤.